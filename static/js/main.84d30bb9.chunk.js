(this["webpackJsonpshop-spa"]=this["webpackJsonpshop-spa"]||[]).push([[0],{33:function(e,t,r){e.exports=r.p+"static/media/logo.76518c38.svg"},34:function(e,t,r){e.exports=r.p+"static/media/caret.53e58f1a.svg"},35:function(e,t,r){e.exports=r.p+"static/media/close.90506c7b.svg"},40:function(e,t,r){e.exports=r(81)},45:function(e,t,r){},46:function(e,t,r){},51:function(e,t,r){},52:function(e,t,r){},54:function(e,t,r){},55:function(e,t,r){},56:function(e,t,r){},57:function(e,t,r){},59:function(e,t,r){},60:function(e,t,r){},61:function(e,t,r){},62:function(e,t,r){},80:function(e,t,r){},81:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),a=r(18),s=r.n(a),i=r(15),o=r(12),u=(r(45),r(46),r(7)),l=r(1),p=r(2),d=r(4),m=r(3),f=r(5),b=(r(51),r(33)),h=r.n(b),_=r(34),g=r.n(_),O=(r(52),r(35)),v=r.n(O),y=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.cart,r=e.increase,c=e.decrease,a=e.cartToggle,s=e.isEmpty;return n.createElement("aside",{className:"cart"},n.createElement("button",{onClick:a,className:"cart__close-btn",type:"button"},n.createElement("img",{className:"",src:v.a,alt:""})),s.length?n.createElement("ul",{className:"cart__product-list"},t.map((function(e){return n.createElement("li",{className:"cart__product-item",key:e.id},n.createElement("picture",{className:"cart__product-img"},n.createElement("img",{src:"/shop-spa"+e.image,alt:"product"})),n.createElement("div",{className:"cart__product-info-wrap"},n.createElement("p",{className:"cart__product-title"},e.title),n.createElement("div",{className:"cart__product-qty-info"},n.createElement("div",null,n.createElement("button",{className:"cart__product-qty-btn --minus",type:"button",onClick:function(){return c(e.id)}},"-"),n.createElement("span",null,e.qty),n.createElement("button",{className:"cart__product-qty-btn --plus",type:"button",onClick:function(){return r(e.id)}},"+")),n.createElement("span",null,"$ ",e.price))))}))):n.createElement("p",{className:"cart__empty-msg"},"\u0412 \u0432\u0430\u0448\u0435\u0439 \u043a\u043e\u0440\u0437\u0438\u043d\u0435 \u043f\u0443\u0441\u0442\u043e.."),n.createElement("div",{className:"cart__total-info"},n.createElement("p",null,"\u0418\u0442\u043e\u0433\u043e:"),n.createElement("p",null,"$"," ",t.reduce((function(e,t){return e+=t.price*t.qty}),0))),s.length?n.createElement("div",{className:"cart__buy-btn-wrap"},n.createElement("button",{type:"button"},"\u041a\u0443\u043f\u0438\u0442\u044c")):null)}}]),t}(n.Component),E=Object(u.b)((function(e){return{cart:e.cart.items}}),(function(e){return{increase:function(t){return e(function(e){return{type:"@@cart/increase-quantity",payload:e}}(t))},decrease:function(t){return e(function(e){return{type:"@@cart/decrease-quantity",payload:e}}(t))}}}))(y),j=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleClick=function(){var e=r.state.isOpen;r.setState({isOpen:!e})},r.state={isOpen:!1},r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state.isOpen,t=this.props.cart;return n.createElement("header",{className:"header"},n.createElement("div",{className:"header__container container"},n.createElement(i.b,{className:"header__logo",to:"/"},n.createElement("img",{src:h.a,alt:"site-logo"})),n.createElement("div",{className:"header__cart-wrap"},n.createElement("button",{type:"button",className:"header__cart",onClick:this.handleClick},n.createElement("img",{src:g.a,alt:"caret-icon"})),n.createElement("div",{className:"header__cart-counter"},n.createElement("span",null,t.length)))),e&&n.createElement(E,{cartToggle:this.handleClick,isEmpty:t}))}}]),t}(n.Component),N=Object(u.b)((function(e){return{cart:e.cart.items}}),null)(j),k=(r(54),function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return n.createElement("main",null,n.createElement(w,null))}}]),t}(n.Component)),w=(r(55),function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return n.createElement("section",{className:"products"},n.createElement("div",{className:"products__container container"},n.createElement("div",{className:"products__nav-wrap"},n.createElement(B,null),n.createElement(V,null)),n.createElement("div",{className:"products__products-wrap"},n.createElement(X,null))))}}]),t}(n.Component)),C=(r(56),function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return n.createElement(n.Fragment,null,n.createElement(N,null),n.createElement(k,null))}}]),t}(n.Component)),P=r(19),I=(r(57),r(29)),S=r.n(I),T=r(37),D="@@products/is-fetching",q=new(function(){function e(){Object(l.a)(this,e),this.defaultHeaders=new Headers({"Content-Type":"application/json",Accept:"application/json"})}return Object(p.a)(e,[{key:"get",value:function(e,t){var r={method:"GET",headers:this.defaultHeaders};return fetch(e,r)}}]),e}()),x=function(e){return{type:D,payload:e}},F=function(e){return{type:"@@products/fetch-success",payload:e}},z=function(e){return{type:"@@products/fetch-error",payload:e}},H=function(){return function(){var e=Object(T.a)(S.a.mark((function e(t){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(x(!0)),e.prev=1,e.next=4,q.get("/server/products.json").then((function(e){return e.json()}));case 4:r=e.sent,t(F(r)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),t(z({status:599,message:"Oops! Something wend wrong!"}));case 12:return e.prev=12,t(x(!1)),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})));return function(t){return e.apply(this,arguments)}}()},M=function(e){return{type:"@@products/select-product",payload:e}};function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var $=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){r.setState({size:e.target.value})},r.handleSubmit=function(e){e.preventDefault();var t=r.props;(0,t.addProductToCart)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(r,!0).forEach((function(t){Object(P.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t.selectedItem,{qty:1}))},r.state={size:""},r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.selectedItem,r=e.match.params.id,n=e.getProducts,c=e.selectCurrentProduct;!t&&r&&(n(),c(r))}},{key:"render",value:function(){var e,t=this.props.selectedItem,r=this.state.size;return n.createElement(n.Fragment,null,t?n.createElement(n.Fragment,null,n.createElement(N,null),n.createElement("form",{className:"product-page__container container",onSubmit:this.handleSubmit},n.createElement("div",{className:"product-page__photo-wrap"},n.createElement("img",{src:t.image,alt:"product"})),n.createElement("div",{className:"product-page__description-wrap"},n.createElement(i.b,{class:"product-page__back-btn",to:"/"},n.createElement("i",{className:"icon-caret-left-thin"}),n.createElement("span",null,"\u041d\u0430\u0437\u0430\u0434")),n.createElement("div",{className:"product-page__info-wrap"},n.createElement("h3",{className:"product-page__category"},t.category.name),n.createElement("h2",{className:"product-page__name"},t.title),n.createElement("div",{className:"product-page__attr-wrap"},n.createElement("div",{className:"product-page__form-el-wrap"},n.createElement("select",{onChange:this.handleChange},n.createElement("option",{value:"",defaultValue:!0},"\u0420\u0430\u0437\u043c\u0435\u0440"),t.sizes.map((function(e,t){return n.createElement("option",{key:t,value:e},e)})))),n.createElement("button",{className:"product-page__form-el-wrap product-page__buy-btn",type:"submit",disabled:!r},"\u0412 \u041a\u043e\u0440\u0437\u0438\u043d\u0443"))),n.createElement("div",{dangerouslySetInnerHTML:(e=t.description,{__html:e})})))):null)}}]),t}(n.Component),L=Object(o.f)(Object(u.b)((function(e){var t=e.products,r=t.selectedId;return{selectedItem:t.items.reduce((function(e,t){return t.id===r&&(e=t),e}),null)}}),(function(e){return{getProducts:function(){return e(H())},selectCurrentProduct:function(t){return e(M(t))},addProductToCart:function(t){return e({type:"@@cart/add-product",payload:t})}}}))($)),R=(r(59),function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleClick=function(e){var t=r.props,n=t.filter,c=t.filterNavReset,a=e.target.dataset.id;if(r.setState({activeId:a}),"reset"===a)return c();n(a)},r.state={activeId:"reset"},r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state.activeId;return n.createElement("nav",{className:"products-nav"},n.createElement("ul",{className:"products-nav__list"},n.createElement("li",{className:"products-nav__item"},n.createElement("button",{className:"reset"===e?"products-nav__link --active":"products-nav__link","data-id":"reset",type:"button",onClick:this.handleClick},"\u0412\u0441\u0435")),n.createElement("li",{className:"products-nav__item"},n.createElement("button",{className:"3"===e?"products-nav__link --active":"products-nav__link",type:"button","data-id":"3",onClick:this.handleClick},"\u0420\u0443\u0431\u0430\u0448\u043a\u0438")),n.createElement("li",{className:"products-nav__item"},n.createElement("button",{className:"2"===e?"products-nav__link --active":"products-nav__link",type:"button","data-id":"2",onClick:this.handleClick},"\u041a\u0440\u043e\u0441\u0441\u043e\u0432\u043a\u0438"))))}}]),t}(n.Component)),B=Object(u.b)(null,(function(e){return{filter:function(t){return e(function(e){return{type:"@@products/filter-products",payload:e}}(t))},filterNavReset:function(){return e({type:"@@products/filter-reset"})}}}))(R),J=(r(60),function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleToggle=function(){r.setState({isOpen:!r.state.isOpen})},r.handleClick=function(e){var t=e.target.name;(0,r.props.sortProducts)(t),r.setState({activeSorting:t})},r.state={isOpen:!1,activeSorting:null},r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isOpen,r=e.activeSorting;return n.createElement("div",{className:"products-sorter"},n.createElement("div",{className:"products-sorter__toggle-wrap"},n.createElement("button",{type:"button",className:t?"products-sorter__toggle --open":"products-sorter__toggle",onClick:this.handleToggle},n.createElement("span",{className:"products-sorter__toggle-txt"},"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),n.createElement("i",{className:"products-sorter__toggle-icon icon-caret-down"})),n.createElement("ul",{className:"products-sorter__list"},n.createElement("li",{className:"products-sorter__item"},n.createElement("button",{type:"button",className:"priceDown"===r?"products-sorter__btn --active":"products-sorter__btn",name:"priceDown",onClick:this.handleClick},"\u041e\u0442 \u0434\u043e\u0440\u043e\u0433\u0438\u0445 \u043a \u0434\u0435\u0448\u0435\u0432\u044b\u043c")),n.createElement("li",{className:"products-sorter__item"},n.createElement("button",{type:"button",className:"priceUp"===r?"products-sorter__btn --active":"products-sorter__btn",name:"priceUp",onClick:this.handleClick},"\u041e\u0442 \u0434\u0435\u0448\u0435\u0432\u044b\u0445 \u043a \u0434\u043e\u0440\u043e\u0433\u0438\u043c")),n.createElement("li",{className:"products-sorter__item"},n.createElement("button",{type:"button",className:"popular"===r?"products-sorter__btn --active":"products-sorter__btn",name:"popular",onClick:this.handleClick},"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435")),n.createElement("li",{className:"products-sorter__item"},n.createElement("button",{type:"button",className:"new"===r?"products-sorter__btn --active":"products-sorter__btn",name:"new",onClick:this.handleClick},"\u041d\u043e\u0432\u044b\u0435")))))}}]),t}(n.Component)),V=Object(u.b)(null,(function(e){return{sortProducts:function(t){return e(function(e){return{type:"@@products/sort-products",payload:e}}(t))}}}))(J),W=(r(61),function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.getProducts;0===e.products.length&&t()}},{key:"render",value:function(){var e=this.props.isFetching;return n.createElement("ul",{className:"products-grid"},e?n.createElement("p",null,"...Loading"):this.products.map((function(e){return n.createElement(Y,Object.assign({key:e.id},e))})))}},{key:"products",get:function(){var e=this.props,t=e.filteredProducts,r=e.products;return t||r}}]),t}(n.Component)),X=Object(u.b)((function(e){return{products:e.products.items,filteredProducts:e.products.filteredItems,isFetching:e.products.isFetching}}),(function(e){return{getProducts:function(){return e(H())}}}))(W),A=(r(62),r(63),r(64),r(38)),G=r.n(A),K=(r(80),function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleClick=function(e){(0,r.props.setTempImage)(e.target.currentSrc),r.setState({activeSlide:e.target.dataset.index})},r.state={activeSlide:"0"},r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.images,r=this.state.activeSlide;return n.createElement(G.a,Object.assign({className:"products-grid__slider"},{infinite:!1,speed:500,slidesToShow:5,slidesToScroll:1}),t.map((function(t,c){return n.createElement("div",{className:+r===c?"products-grid__slide --active":"products-grid__slide",key:c},n.createElement("img",{style:{width:"100%"},src:t,alt:"thumbnail","data-index":c,onClick:e.handleClick}))})))}}]),t}(n.Component)),Q=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(d.a)(this,Object(m.a)(t).call(this,e))).setTempImage=function(e){r.setState({tempImage:e})},r.handleClick=function(e){e.preventDefault()},r.state={tempImage:null},r}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,r=e.price,c=e.category,a=e.count,s=e.thumbnail,o=e.id,u=e.selectCurrentProduct;return n.createElement("li",{className:"products-grid__card"},n.createElement(i.b,{className:"products-grid__link",to:"/product/".concat(o),onClick:function(){return u(o)}},n.createElement("div",{className:"products-grid__card-img-wrap"},n.createElement("picture",{className:"products-grid__card-img"},n.createElement("img",{src:this.image,alt:"".concat(t)})),n.createElement("div",{className:"products-grid__slider-wrap",onClick:this.handleClick},n.createElement(K,{images:s,setTempImage:this.setTempImage}))),n.createElement("div",{className:"products-grid__card-content"},n.createElement("h3",{className:"products-grid__category"},c.name),n.createElement("p",{className:"products-grid__name"},t),n.createElement("div",{className:"products-grid__info-wrap"},n.createElement("h2",{className:"products-grid__price"},"$",r),n.createElement("span",{className:"products-grid__qty"},"\u043d\u0430 \u0441\u043a\u043b\u0430\u0434\u0435: ",a)))))}},{key:"image",get:function(){var e=this.props.image,t=this.state.tempImage;return t||(e||"http://placekitten.com/200/30")}}]),t}(n.Component),Y=Object(u.b)(null,(function(e){return{selectCurrentProduct:function(t){return e(M(t))}}}))(Q),Z=r(16),ee=r(39),te=r(8);function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(r,!0).forEach((function(t){Object(P.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ce={isFetching:!1,error:null,items:[],filteredItems:null},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return ne({},e,{isFetching:t.payload});case"@@products/fetch-success":return ne({},e,{items:t.payload});case"@@products/filter-products":return ne({},e,{filteredItems:e.items.filter((function(e){return e.category.id===t.payload}))});case"@@products/filter-reset":return ne({},e,{filteredItems:null});case"@@products/sort-products":return"priceDown"===t.payload?e.filteredItems?ne({},e,{filteredItems:Object(te.a)(e.filteredItems).sort((function(e,t){return t.price-e.price})),items:Object(te.a)(e.items).sort((function(e,t){return t.price-e.price}))}):ne({},e,{items:Object(te.a)(e.items).sort((function(e,t){return t.price-e.price}))}):"priceUp"===t.payload?e.filteredItems?ne({},e,{filteredItems:Object(te.a)(e.filteredItems).sort((function(e,t){return e.price-t.price})),items:Object(te.a)(e.items).sort((function(e,t){return e.price-t.price}))}):ne({},e,{items:Object(te.a)(e.items).sort((function(e,t){return e.price-t.price}))}):"popular"===t.payload?e.filteredItems?ne({},e,{filteredItems:Object(te.a)(e.filteredItems).sort((function(e,t){return e.count-t.count})),items:Object(te.a)(e.items).sort((function(e,t){return e.count-t.count}))}):ne({},e,{items:Object(te.a)(e.items).sort((function(e,t){return e.count-t.count}))}):"new"===t.payload?e.filteredItems?ne({},e,{filteredItems:Object(te.a)(e.filteredItems).sort((function(e,t){return t.createdTimestamp-e.createdTimestamp})),items:Object(te.a)(e.items).sort((function(e,t){return t.createdTimestamp-e.createdTimestamp}))}):ne({},e,{items:Object(te.a)(e.items).sort((function(e,t){return t.createdTimestamp-e.createdTimestamp}))}):ne({},e);case"@@products/select-product":return ne({},e,{selectedId:t.payload});default:return e}};function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(r,!0).forEach((function(t){Object(P.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var oe={items:[]},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@@cart/add-product":var r=e.items.reduce((function(e,r){return r.id===t.payload.id||e}),!1);if(r){var n=e.items.reduce((function(e,r){return r.id===t.payload.id&&r.qty++,e.push(r),e}),[]);return ie({},e,{items:n})}return ie({},e,{items:[].concat(Object(te.a)(e.items),[t.payload])});case"@@cart/increase-quantity":var c=e.items.reduce((function(e,r){return r.id===t.payload&&r.qty++,e.push(r),e}),[]);return ie({},e,{items:c});case"@@cart/decrease-quantity":var a=e.items.reduce((function(e,r){if(r.id===t.payload){if(1===r.qty)return e;r.qty--}return e.push(r),e}),[]);return ie({},e,{items:a});default:return e}},le=function(){return Object(Z.c)({products:ae,cart:ue})};var pe=function(e){var t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Z.d;return Object(Z.e)(le(),e,t(Object(Z.a)(ee.a)))}();var de=function(){return c.a.createElement(u.a,{store:pe},c.a.createElement(i.a,{basename:"/shop-spa"},c.a.createElement(o.c,null,c.a.createElement(o.a,{path:"/",exact:!0},c.a.createElement(C,null)),c.a.createElement(o.a,{path:"/product/:id"},c.a.createElement(L,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(de,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[40,1,2]]]);
//# sourceMappingURL=main.84d30bb9.chunk.js.map